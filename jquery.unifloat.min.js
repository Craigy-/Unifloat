/*!
 * Unifloat
 * Universal jQuery plugin for simply creating floating elements such as Dropdown menu and Tooltips
 *
 * @requires jQuery v1.4.3 or newer
 *
 * @author Grigory Zarubin (http://craigy.ru/)
 * @link http://craigy-.github.io/Unifloat/
 * @version 3.0.0
 * @date 15.12.2013
 *
 * Dual licensed under the MIT or GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
(function(a){var g={B:function(b){function c(){for(var b=0,e=d.length;b<e;b++){var c=a(d[b]);c.is(":animated")&&(a(c).stop(!0,!0),a(c).o())}}var e=a.extend(!0,{},g.f,b),d=[];return this.g(function(){if(!a(this).data("unifloat")){var b=this,f=g.w.call(this,e);if(f){a(this).data("unifloat",e);e.s&&a(document.body).append(a(f));d.push(f);if(e.move)var k=function(a){var b=a.pageX;a=a.pageY;var c=e.move[1]||15,f=e.move[0]||15;return{top:{value:a+f,a:0>a?"0":String(a-f)+"-%%TARGETHEIGHT%%"},left:{value:b+
c,a:0>b?"0":String(b-c)+"-%%TARGETWIDTH%%"}}};a(this).G(function(l){if(!a(f).is(":animated")&&!a(f).is(":visible")){c();if(e.move)var d=k(l);g.show.call(a(f),a.extend(!0,{},e,{rel:this,c:e.move?d.top:e.c,b:e.move?d.left:e.b,h:function(c,d){if(e.move){var m=k(l);a(f).l(g.i.call(a(f),a.extend(!0,{},e,{rel:b,c:m.top,b:m.left})))}e.h(c,d)}}))}},function(b){var d=!1;a(b.relatedTarget).D().g(function(){this===a(f).get(0)&&(d=!0)});b.relatedTarget===a(f).get(0)||d||d&&!e.move||(a(f).o(),c(),e.v(this,f))});
e.move&&a(this).J(function(c){a(f).is(":animated")||(c=k(c),a(f).l(g.i.call(a(f),a.extend(!0,{},e,{rel:b,c:c.top,b:c.left}))))});a(f).I(function(c){var d=!1;a(c.relatedTarget).D().g(function(){this===b&&(d=!0)});c.relatedTarget===b||d||(a(this).o(),e.v(b,this))})}}})},i:function(b){function c(b,c){var e=a(document).scrollLeft(),d=a(document).scrollTop();return{top:c>=d&&a(window).height()+d>=c+k,left:b>=e&&a(window).width()+e>=b+f}}function e(b,c){var e={above:h.top-k,top:h.top,center:h.top+m/2,bottom:h.top+
m-k,under:h.top+m},d={before:h.left-f,left:h.left,center:h.left+l/2,right:h.left+l-f,after:h.left+l},g={"%%SOURCEWIDTH%%":l,"%%SOURCEHEIGHT%%":m,"%%TARGETWIDTH%%":f,"%%TARGETHEIGHT%%":k,"%%WINDOWWIDTH%%":a(window).width(),"%%WINDOWHEIGHT%%":a(window).height(),"%%DOCUMENTWIDTH%%":a(document).width(),"%%DOCUMENTHEIGHT%%":a(document).height()},p=[],n;for(n in c?e:d)p.push(n);p=new RegExp("("+p.join("|")+")","g");p=b.toString().replace(/(%%[A-Z]+%%)/g,function(a){return g[a]}).replace(p,function(a){return(c?
e:d)[a]});try{return eval("("+p+")")}catch(q){a.error("Unifloat: method 'pos' can't get the correct coordinates, please check your expressions!")}}b=a.extend(!0,{},g.f,b);var d=g.j.call(this,b)||document.body,h=b.s?a(d).offset():a(d).position(),f=a(this).outerWidth(),k=a(this).outerHeight(),l=a(d).outerWidth(),m=a(d).outerHeight(),d=e(b.c.value,!0),n=e(b.b.value);return{top:b.c.a?c(n,d).top?d:e(b.c.a,!0):d,left:b.b.a?c(n,d).left?n:e(b.b.a):n}},show:function(b){var c=a.extend(!0,{},g.f,b);return this.g(function(){var b=
g.i.call(this,c),d=g.j.call(this,c)||document.body;c.C(a(d),this);a(this).l(b).show(c.m?c.m:0,function(){c.h(a(d),this)})})},j:function(b){var c=a(this).A("id");return c||a(b.rel).length?a(b.rel).length?b.rel:"#"+c.replace(b.rel,""):!1},w:function(b){var c=a(this).A("id");return c||a(b.rel).length?a(b.rel).length?b.rel:"#"+c+b.rel:!1},f:{rel:"-content",c:{value:"under",a:"above"},b:{value:"left",a:"right"},move:!1,m:"fast",s:!0,C:a.u,h:a.u,v:a.u}};a.F.K=function(b){if(g[b])return g[b].apply(this,
Array.prototype.slice.call(arguments,1));if(a.H(b)||!b)return g.B.apply(this,arguments);a.error("Unifloat: method "+b+" doesn't exist!")}})(jQuery);